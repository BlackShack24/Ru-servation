{% extends 'appPrincipale/base.html' %}

{% block title %}Localisation{% endblock %}

{% block content %}

<h2>{{ lieu.nom }}</h2>

<div id="googleMap" style="width:50%;height:400px;"></div>

<script>
	// Coordon√©es ARTEM 48.6728463,6.1694717
    function myMap() {
      var myLatLng = new google.maps.LatLng("{{ lieu.posX|safe }}","{{ lieu.posY|safe }}");
      var myLatLng2 = new google.maps.LatLng(48.6728463,6.1694717);
/*      var map= {
        center: myLatLng,
        zoom:18,
      };
      var map=new google.maps.Map(document.getElementById("googleMap"),map);
      var marker = new google.maps.Marker({
        position: myLatLng,
        map: map,
        title: "{{ lieu.nom|safe }}"
      });*/

        var directionsService = new google.maps.DirectionsService;
        var directionsDisplay = new google.maps.DirectionsRenderer;
        var map = new google.maps.Map(document.getElementById('googleMap'), {
          zoom: 16,
          center: myLatLng
        });
        directionsDisplay.setMap(map);

directionsService.route({
          origin: myLatLng2,
          destination: myLatLng,
          travelMode: 'WALKING'
        }, function(response, status) {
          if (status === 'OK') {
            directionsDisplay.setDirections(response);
          } else {
            window.alert('Directions request failed due to ' + status);
          }
        });


/*
        var onChangeHandler = function() {
          calculateAndDisplayRoute(directionsService, directionsDisplay);
        };

      }

      function calculateAndDisplayRoute(directionsService, directionsDisplay) {
        directionsService.route({
          origin: myLatLng2,
          destination: myLatLng,
          travelMode: 'WALKING'
        }, function(response, status) {
          if (status === 'OK') {
            directionsDisplay.setDirections(response);
          } else {
            window.alert('Directions request failed due to ' + status);
          }
        });*/

    }
</script>

 <script src="https://maps.google.com/maps/api/js?key=AIzaSyAsqUjKe9kLGBUQiqqfG8Q2V1YjkcrNi2Y&callback=myMap" async="" defer="defer" type="text/javascript"></script>


{% endblock %}